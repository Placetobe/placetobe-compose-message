<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../placetobe-styles/placetobe-styles.html">
<link rel="import" href="../placetobe-textarea-box/placetobe-textarea-box.html">
<link rel="import" href="../placetobe-button/placetobe-button.html">
<link rel="import" href="../placetobe-card/placetobe-card.html">

<!--
`placetobe-compose-message`
Placetobe element for composing a message

@demo demo/index.html 
-->

<dom-module id="placetobe-compose-message">
  <template>
    <style>
      :host {
        display: block;
      }
      placetobe-textarea-box {
        --iron-autogrow-textarea-max-height: {
          max-height: 100px;
        }
      }
      
    </style>
  
    <placetobe-card title="[[cardTitle]]" id="compose-message">
      <article slot="main">
        <placetobe-textarea-box name="[[messageLabel]]" placeholder="[[messagePlaceholder]]" value="{{messageString}}" max-rows="[[maxRows]]"></placetobe-textarea-box>
      </article>
      <placetobe-button
        title="[[buttonTitle]]"
        slot="footer"
        disabled$="[[_emptyMessage]]"
      ><span>[[buttonTitle]]</span>
      </placetobe-button>
    </placetobe-card>

  </template>
  <script>
    Polymer({

      is: 'placetobe-compose-message',

      properties: {
        /**
         * Message (String) entered by user
        */ 
        messageString: {
          type: String,
          notify: true
        },
        /**
         * String displayed at the top of the card
        */ 
        cardTitle: {
          type: String
        },
        /**
         * String displayed in the button
        */        
        buttonTitle: {
          type: String
        },
        /**
         * Maximum amount of rows to be displayed at a time. Scrollbar will appear if amount of total rows increases this value.
         * Note: When users never hit `enter` (characterCode == 13) the textarea might grow bigger due to a bug.
        */
        maxRows: {
          type: Number
        },
        /**
         * Label on top of textfield reminder user what to write about
        */
        messageLabel: {
          type: String          
        },
        /**
         * Message to be displayed when user has not written anything yet
        */
        messagePlaceholder: {
          type: String                    
        },

        _emptyMessage: {
          type: Boolean,
          computed: '_computeEmpty(messageString)'
        }
      },
      _computeEmpty: function(value) {
        return (!value || value.length < 1);
      },

    });
  </script>
</dom-module>
